<UserControl x:Class="BasicRegionNavigation.Views.ViewB"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:hc="https://handyorg.github.io/handycontrol"
             xmlns:prism="http://prismlibrary.com/"
             xmlns:lvc="clr-namespace:LiveChartsCore.SkiaSharpView.WPF;assembly=LiveChartsCore.SkiaSharpView.WPF"
             xmlns:con="clr-namespace:BasicRegionNavigation"
             xmlns:cons="clr-namespace:BasicRegionNavigation.Controls"
             xmlns:controls="clr-namespace:BasicRegionNavigation.Controls"
             xmlns:skia="clr-namespace:LiveChartsCore.SkiaSharpView.Painting;assembly=LiveChartsCore.SkiaSharpView"
             prism:ViewModelLocator.AutoWireViewModel="True">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid x:Name="Grid1"
          Margin="15,0">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="2*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="1*" />
            <RowDefinition Height="11*" />
            <RowDefinition Height="11*" />
        </Grid.RowDefinitions>
        <Border Grid.ColumnSpan="2"
                Style="{StaticResource MyCustomBorderStyle}"
                Margin="10,-10,10,0"
                Padding="6">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="70" />
                    <ColumnDefinition Width="200" />
                    <ColumnDefinition Width="60" />
                    <ColumnDefinition Width="180" />
                    <ColumnDefinition Width="30" />
                    <ColumnDefinition Width="180" />
                    <ColumnDefinition Width="80" />
                    <ColumnDefinition Width="100" />
                </Grid.ColumnDefinitions>
                <!-- 模组选择 -->
                <TextBlock Text="模组选择"
                           Foreground="White"
                           VerticalAlignment="Center"
                           FontSize="14"
                           Margin="15,0,0,0" />
                <ComboBox Grid.Column="1"
                          ItemsSource="{Binding ModeSelectGroup}"
                          SelectedItem="{Binding ModelNum}"
                          VerticalAlignment="Center"
                          Height="30"
                          Margin="20,0" />

                <!-- 时间范围 -->
                <TextBlock Grid.Column="2"
                           Text="时间范围"
                           Foreground="White"
                           VerticalAlignment="Center"
                           FontSize="14" />
                <hc:DateTimePicker Grid.Column="3"
                                   Height="30"
                                   DateTimeFormat="yyyy-MM-dd HH:mm:ss"
                                   hc:InfoElement.Placeholder="开始时间"
                                   hc:InfoElement.ShowClearButton="True"
                                   Margin="10,0"
                                   SelectedDateTime="{Binding Start}" />
                <TextBlock Grid.Column="4"
                           Text="至"
                           VerticalAlignment="Center"
                           Foreground="White"
                           HorizontalAlignment="Center"
                           FontSize="14" />
                <hc:DateTimePicker Grid.Column="5"
                                   Height="30"
                                   DateTimeFormat="yyyy-MM-dd HH:mm:ss"
                                   Margin="10,0"
                                   SelectedDateTime="{Binding End}" />

                <!-- 查询按钮 -->
                <Button Grid.Column="6"
                        Content="查询"
                        Width="70"
                        Height="30"
                        Background="#2288FF"
                        Foreground="White"
                        BorderThickness="0"
                        Command="{Binding QueryCommand}" />

                <!-- 导出按钮 -->
                <Button Grid.Column="7"
                        Content="导出数据"
                        Width="90"
                        Height="30"
                        Background="#4CAF50"
                        Foreground="White"
                        Command="{Binding ExportCommand}"
                        BorderThickness="0" />
            </Grid>
        </Border>
        
        <cons:TwoDataTableWithHeader  Title="{Binding TwoDataTableWithHeaderTitle}" Panel.ZIndex="2"
                                      Grid.Column="0"
                                      Grid.Row="1"
                                      Grid.ColumnSpan="2"
                                      DynamicColumnsTop="{Binding ProductInfoColumns}" Margin="0,0,0,0"
                                      ItemsSourceTop="{Binding CurrentModule.CurrentProductInfo.TopData}"
                                      ItemsSourceBottom="{Binding CurrentModule.CurrentProductInfo.BottomData}"
                                      DynamicColumnsBottom="{Binding ProductInfoColumns_Down}"></cons:TwoDataTableWithHeader>

        <!--<Border Grid.Column="0" Grid.Row="2" Style="{StaticResource MyCustomBorderStyle}" ></Border>-->
        <cons:PieChartCard Grid.Column="0"
                           Grid.Row="2"
                           Title="上挂产品生产信息"
                           Series="{Binding CurrentModule.CurrentPieInfo.UpMyPieSeries}" 
                            />
        <cons:PieChartCard Grid.Column="1"
                           Grid.Row="2"
                           Title="下挂产品生产信息"
                           Series="{Binding CurrentModule.CurrentPieInfo.DnMyPieSeries}" 
                            />
        <con:DataTableWithHeader Grid.Column="2"
                                 Grid.Row="1"
                                 Title="设备效能数据表"
                                 DynamicColumns="{Binding ProductEfficiencyColumns}"
                                 ItemsSource="{Binding CurrentModule.CurrentEfficiencyInfo.EfficiencyData}"></con:DataTableWithHeader>
        <Border Grid.Column="2"
                Grid.Row="2"
                Background="#232f3a"
                CornerRadius="6"
                Padding="5"
                Margin="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="1.3*" />
                    <RowDefinition Height="10*" />
                </Grid.RowDefinitions>

                <ContentControl  Content="故障时间统计"
                                 Margin="0,0,0,2"
                                 Style="{StaticResource SectionHeaderStyle}" />
                <lvc:CartesianChart Grid.Row="1"
                                    x:Name="cartesianChart1"
                                    YAxes="{Binding CurrentModule.CurrentFaultStatsInfo.YAxes}"
                                    XAxes="{Binding CurrentModule.CurrentFaultStatsInfo.XAxes}"
                                    Series="{Binding CurrentModule.CurrentFaultStatsInfo.Series}"
                                    Background="#232f3a"
                                    LegendPosition="Top">
                </lvc:CartesianChart>
            </Grid>
        </Border>
    </Grid>
</UserControl>
