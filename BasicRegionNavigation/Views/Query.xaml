<UserControl x:Class="BasicRegionNavigation.Views.Query"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:prism="http://prismlibrary.com/"      
             xmlns:hc="https://handyorg.github.io/handycontrol"
             prism:ViewModelLocator.AutoWireViewModel="True"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="1000">

    <UserControl.Resources>
        <Style x:Key="WhiteHeaderStyle" TargetType="DataGridColumnHeader">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="Black"/>
            <Setter Property="Padding" Value="10,0,0,0"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
        </Style>
        <Style TargetType="DataGridCell" x:Key="CustomDataGridCellStyle">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Foreground" Value="MediumPurple"/>
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Foreground" Value="Aqua"/>
                    <Setter Property="Background" Value="#34495E"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Margin="5" Padding="10" Background="#1E2A38" CornerRadius="5">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="50"/>
                    <RowDefinition Height="50"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" MinWidth="60"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto" MinWidth="60"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto" MinWidth="60"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto" MinWidth="80"/>
                    <ColumnDefinition Width="1.5*"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0" Text="产品码" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,10,0"/>
                <hc:TextBox Text="{Binding ProductCode}" Grid.Row="0" Grid.Column="1" hc:InfoElement.Placeholder="请输入产品码" VerticalAlignment="Center"/>

                <TextBlock Grid.Row="0" Grid.Column="2" Text="项目号" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,10,0"/>
                <hc:TextBox Text="{Binding ProductProjectNo}" Grid.Row="0" Grid.Column="3" hc:InfoElement.Placeholder="请输入项目号" VerticalAlignment="Center"/>

                <TextBlock Grid.Row="0" Grid.Column="4" Text="挂具号" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,10,0"/>
                <hc:TextBox Text="{Binding HangerCode}" Grid.Row="0" Grid.Column="5" hc:InfoElement.Placeholder="请输入挂具号" VerticalAlignment="Center"/>

                <StackPanel Grid.Row="0" Grid.Column="7" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right">
                    <TextBlock Text="上供料时间:" Foreground="White" VerticalAlignment="Center" Margin="0,0,5,0"/>
                    <hc:DateTimePicker SelectedDateTime="{Binding StartCreatedAt}" Width="160" DateTimeFormat="yyyy-MM-dd HH:mm"/>
                    <TextBlock Text="-" Foreground="White" VerticalAlignment="Center" Margin="5,0"/>
                    <hc:DateTimePicker SelectedDateTime="{Binding EndCreatedAt}" Width="160" DateTimeFormat="yyyy-MM-dd HH:mm"/>
                </StackPanel>

                <TextBlock Grid.Row="1" Grid.Column="0" Text="颜色" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,10,0"/>
                <hc:TextBox Text="{Binding Color}" Grid.Row="1" Grid.Column="1" hc:InfoElement.Placeholder="请输入颜色" VerticalAlignment="Center"/>

                <TextBlock Grid.Row="1" Grid.Column="2" Text="材料类别" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,10,0"/>
                <hc:TextBox Text="{Binding RawMaterialCategory}" Grid.Row="1" Grid.Column="3" hc:InfoElement.Placeholder="请输入材料类别" VerticalAlignment="Center"/>

                <TextBlock Grid.Row="1" Grid.Column="4" Text="上料机" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,10,0"/>
                <hc:TextBox Text="{Binding UpHangerModoule}" Grid.Row="1" Grid.Column="5" hc:InfoElement.Placeholder="请输入上料机" VerticalAlignment="Center"/>

                <StackPanel Grid.Row="1" Grid.Column="7" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                    <Button Content="查询" Command="{Binding QueryCommand}" Width="80" Style="{StaticResource ButtonPrimary}" Margin="0,0,10,0"/>
                    <Button Content="导出" Command="{Binding ExportCommand}" Width="80" Style="{StaticResource ButtonSuccess}" Margin="0,0,10,0"/>
                    <Button Content="重置" Command="{Binding ResetCommand}" Width="80"/>
                </StackPanel>
            </Grid>
        </Border>

        <Grid Grid.Row="1" Margin="5">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <DataGrid x:Name="ProductGrid" 
                  ItemsSource="{Binding PagedProducts}"
                  AutoGenerateColumns="False"
                  HeadersVisibility="Column"
                  CanUserAddRows="False"
                  IsReadOnly="True"
                  GridLinesVisibility="Horizontal"
                  RowBackground="#22313F"
                  AlternatingRowBackground="#2C3E50"
                  Foreground="White"
                  Background="#1E2A38"
                  BorderThickness="0"
                  ColumnHeaderHeight="45"
                  CellStyle="{StaticResource CustomDataGridCellStyle}"
                  FontSize="14"
                  ColumnHeaderStyle="{StaticResource WhiteHeaderStyle}">

                <DataGrid.Columns>
                    <DataGridTextColumn Header="序列" Binding="{Binding Id}" Width="60" />

                    <DataGridTextColumn Header="产品码" Binding="{Binding ProductCode}" Width="1.5*" />

                    <DataGridTextColumn Header="项目号" Binding="{Binding ProjectNumber}" Width="*" />

                    <DataGridTextColumn Header="原材料别" Binding="{Binding ProductCategory}" Width="*" />

                    <DataGridTextColumn Header="批次" Binding="{Binding FixtureCode}" Width="0.8*" />

                    <DataGridTextColumn Header="上料机" Binding="{Binding UpLoadDeivceName}" Width="*" />

                    <DataGridTextColumn Header="上供料时间" 
                                        Binding="{Binding UpLoad_Time, StringFormat='yyyy-MM-dd HH:mm:ss'}" 
                                        Width="1.5*" />

                    <DataGridTextColumn Header="颜色" Binding="{Binding ProductColor}" Width="0.6*" />

                    <DataGridTextColumn Header="上挂时间" 
                                        Binding="{Binding UpperHangFlip_Time, StringFormat='HH:mm:ss'}" 
                                        Width="*" />
                </DataGrid.Columns>
            </DataGrid>
            <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                <TextBlock Text="{Binding AllProducts.Count, StringFormat=Total: {0}}" Foreground="White" VerticalAlignment="Center" Margin="0,0,20,0"/>

                <ComboBox Width="80" SelectedValue="{Binding PageSize}" SelectedValuePath="Content" VerticalAlignment="Center">
                    <ComboBoxItem Content="15" IsSelected="True"/>
                    <ComboBoxItem Content="30" />
                    <ComboBoxItem Content="50" />
                    <ComboBoxItem Content="100" />
                </ComboBox>

                <Button Content="&lt;" Width="30" Command="{Binding PrevPageCommand}" Margin="10,0,0,0"/>

                <TextBlock Text="{Binding CurrentPage}" Foreground="White" VerticalAlignment="Center" Margin="10,0"/>
                <TextBlock Text="/" Foreground="Gray" VerticalAlignment="Center"/>
                <TextBlock Text="{Binding TotalPages}" Foreground="White" VerticalAlignment="Center" Margin="10,0"/>

                <Button Content="&gt;" Width="30" Command="{Binding NextPageCommand}" />
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>