<UserControl x:Class="BasicRegionNavigation.Views.Query"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:BasicRegionNavigation.Views"
             xmlns:prism="http://prismlibrary.com/"     
             xmlns:hc="https://handyorg.github.io/handycontrol"
             prism:ViewModelLocator.AutoWireViewModel="True"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                 
            </ResourceDictionary.MergedDictionaries>
            <Style x:Key="WhiteHeaderStyle" TargetType="DataGridColumnHeader">
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="Background" Value="Black"/>
                <!--<Setter Property="FontWeight" Value="Bold"/>-->
                <Setter Property="Padding" Value="25,0,0,0"/>
                <Setter Property="Height" Value="40"/>
            </Style>
            <Style TargetType="DataGridCell" x:Key="CustomDataGridCellStyle">
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="BorderBrush" Value="Transparent"/>
                <!--<Setter Property="Margin" Value="6,0"/>-->
                <Setter Property="VerticalAlignment" Value="Center"/>
                <Setter Property="HorizontalAlignment" Value="Center"/>
                <Style.Triggers>
                    <!-- 鼠标悬停高亮 -->
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Foreground" Value="MediumPurple"/>
                    </Trigger>

                    <!-- 被选中时的字体颜色和背景 -->
                    <Trigger Property="IsSelected" Value="True">
                        <Setter Property="Foreground" Value="Aqua"/>
                        <!-- ⬅️ 设置选中时字体为白色 -->
                    </Trigger>
                </Style.Triggers>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="1*"/>
            <RowDefinition Height="5*"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Style="{StaticResource MyCustomBorderStyle}" >
            <Grid>

                <Grid.RowDefinitions>
                    <RowDefinition  Height="*"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="3*"/>
                        <ColumnDefinition Width="7*"/>
                        <ColumnDefinition Width="3*"/>
                        <ColumnDefinition Width="7*"/>
                        <ColumnDefinition Width="3*"/>
                        <ColumnDefinition Width="7*"/>
                        <ColumnDefinition Width="3*"/>
                        <ColumnDefinition Width="5*"/>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="5*"/>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="2*"/>

                    </Grid.ColumnDefinitions>
                    <TextBlock HorizontalAlignment="Center"  Text="产品码" Foreground="White" VerticalAlignment="Center" FontSize="14"/>

                    <Border Grid.Column="1" BorderBrush="White" BorderThickness="1" CornerRadius="6" Height="30">
                        <hc:WatermarkTextBox Text="{Binding ProductCode}"    Watermark="请输入产品码" Height="30" Foreground="White"  Margin="0,7,0,0"/>
                    </Border>
                    <TextBlock Grid.Column="2" HorizontalAlignment="Center" Text="项目号" Foreground="White" VerticalAlignment="Center" FontSize="14"/>
                    <Border Grid.Column="3" BorderBrush="White" BorderThickness="1" CornerRadius="6" Height="30">
                        <hc:WatermarkTextBox Text="{Binding ProductProjectNo}"  Watermark="请输入项目号" Height="30" Foreground="White" Background="Red" Margin="0,7,0,0"/>
                    </Border>
                    <TextBlock Grid.Column="4" HorizontalAlignment="Center" Text="挂具号" Foreground="White" VerticalAlignment="Center" FontSize="14"/>
                    <Border Grid.Column="5" BorderBrush="White" BorderThickness="1" CornerRadius="6" Height="30">
                        <hc:WatermarkTextBox Text="{Binding HangerCode}"  Watermark="请输入挂具号" Height="30" Foreground="White" Background="Red" Margin="0,7,0,0"/>
                    </Border>
                    <TextBlock Grid.Column="6" HorizontalAlignment="Center" Text="上供料时间" Foreground="White" VerticalAlignment="Center" FontSize="14"/>

                    <!-- 时间范围 -->
                    <hc:DateTimePicker SelectedDateTime="{Binding StartCreatedAt}" Grid.Column="7" Height="30" DateTimeFormat="yyyy-MM-dd HH:mm:ss" hc:InfoElement.Placeholder="开始时间" hc:InfoElement.ShowClearButton="True"
                        Margin="10,0" />
                    <TextBlock Grid.Column="8" Text="至" VerticalAlignment="Center" Foreground="White" HorizontalAlignment="Center" FontSize="14"/>
                    <hc:DateTimePicker SelectedDateTime="{Binding EndCreatedAt}" Grid.Column="9" Height="30" DateTimeFormat="yyyy-MM-dd HH:mm:ss" 
                        Margin="10,0" />
                </Grid>


                <Grid Grid.Row="1" >
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="3*"/>
                        <ColumnDefinition Width="7*"/>
                        <ColumnDefinition Width="3*"/>
                        <ColumnDefinition Width="7*"/>
                        <ColumnDefinition Width="3*"/>
                        <ColumnDefinition Width="7*"/>
                        <ColumnDefinition Width="3*"/>
                        <ColumnDefinition Width="5*"/>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="5*"/>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="2*"/>

                    </Grid.ColumnDefinitions>
                    <TextBlock HorizontalAlignment="Center"  Text="颜色" Foreground="White" VerticalAlignment="Center" FontSize="14"/>
                    <Border Grid.Column="1" BorderBrush="White" BorderThickness="1" CornerRadius="6" Height="30">
                        <hc:WatermarkTextBox Text="{Binding Color}"  Watermark="请输入颜色" Height="30" Foreground="White" Background="Red" Margin="0,7,0,0"/>
                    </Border>
                    <TextBlock Grid.Column="2" HorizontalAlignment="Center" Text="材料类别" Foreground="White" VerticalAlignment="Center" FontSize="14"/>
                    <Border Grid.Column="3" BorderBrush="White" BorderThickness="1" CornerRadius="6" Height="30">
                        <hc:WatermarkTextBox Text="{Binding RawMaterialCategory}"  Watermark="请输入材料类别" Height="30" Foreground="White" Background="Red" Margin="0,7,0,0"/>
                    </Border>
                    <TextBlock Grid.Column="4" HorizontalAlignment="Center" Text="上料机" Foreground="White" VerticalAlignment="Center" FontSize="14"/>
                    <Border Grid.Column="5" BorderBrush="White" BorderThickness="1" CornerRadius="6" Height="30">
                        <hc:WatermarkTextBox Text="{Binding UpHangerModoule}"  Watermark="请输入上料机" Height="30" Foreground="White" Background="Red" Margin="0,7,0,0"/>
                    </Border>
                    <TextBlock Grid.Column="6" HorizontalAlignment="Center" Text="下挂时间" Foreground="White" VerticalAlignment="Center" FontSize="14"/>

                    <!-- 时间范围 -->
                    <hc:DateTimePicker SelectedDateTime="{Binding StartDownHangTime}" Grid.Column="7" Height="30" DateTimeFormat="yyyy-MM-dd HH:mm:ss" hc:InfoElement.Placeholder="开始时间" hc:InfoElement.ShowClearButton="True"
                        Margin="10,0" />
                    <TextBlock Grid.Column="8" Text="至" VerticalAlignment="Center" Foreground="White" HorizontalAlignment="Center" FontSize="14"/>
                    <hc:DateTimePicker SelectedDateTime="{Binding EndDownHangTime}" Grid.Column="9" Height="30" DateTimeFormat="yyyy-MM-dd HH:mm:ss" 
                        Margin="10,0" />

                    <!-- 查询按钮 -->
                    <Button Grid.Row="1" Grid.Column="10" Content="查询" Width="70" Height="30"
            Background="#2288FF" Foreground="White" BorderThickness="0" Command="{Binding QueryCommand}"/>

                    <!-- 导出按钮 -->
                    <Button Grid.Row="1"
                            Grid.Column="11"
                            Content="导出数据"
                            Width="70"
                            Height="30"
                            Command="{Binding ExportCommand}"
                            Background="#4CAF50" Foreground="White" BorderThickness="0"/>
                    <!-- 重置按钮 -->
                    <Button Grid.Row="1" Grid.Column="12" Content="重置" Width="70" Height="30"
            Background="White" Command="{Binding ResetCommand}" Foreground="Black" BorderThickness="0"/>
                </Grid>

            </Grid>
        </Border>
        <Grid Margin="10" Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- DataGrid -->
            <DataGrid x:Name="ProductGrid" 
                  ItemsSource="{Binding PagedProducts}"
                  AutoGenerateColumns="False"
                  
                  HeadersVisibility="Column"
                  CanUserAddRows="False"
                  IsReadOnly="True"
                  GridLinesVisibility="None"
                  RowBackground="#22313F"
                  AlternatingRowBackground="#2C3E50"
                  Foreground="White"
                  Background="#1E2A38"
                  BorderBrush="#1E2A38"
                  ColumnHeaderHeight="40"
                  CellStyle="{StaticResource CustomDataGridCellStyle}"
                  FontSize="14"
                  ColumnHeaderStyle="{StaticResource WhiteHeaderStyle}"
                  HorizontalScrollBarVisibility="Auto"
                  VerticalScrollBarVisibility="Auto">

                <DataGrid.Columns>
                    <DataGridTextColumn Header="序列" Binding="{Binding Index}" Width="0.6*" />
                    <DataGridTextColumn Header="产品码" Binding="{Binding ProductCode}" Width="1.4*" />
                    <DataGridTextColumn Header="项目号" Binding="{Binding ProductProjectNo}" Width="0.7*" />
                    <DataGridTextColumn Header="原材料别" Binding="{Binding MaterialType}" Width="0.8*"/>
                    <DataGridTextColumn Header="批次" Binding="{Binding BatchNo}" Width="0.5*" />
                    <DataGridTextColumn Header="阳极类型" Binding="{Binding AnodeType}" Width="*" />
                    <DataGridTextColumn Header="喷砂线体" Binding="{Binding LineNum}" Width="1*" />
                    <DataGridTextColumn Header="挂具码" Binding="{Binding HangerCode}" Width="0.8*" />
                    <DataGridTextColumn Header="产品位置" Binding="{Binding ProductPosition}" Width="0.8*" />
                    <DataGridTextColumn Header="上料机" Binding="{Binding Loader}" Width="0.8*" />
                    <DataGridTextColumn Header="上供料时间" Binding="{Binding FeedTime}" Width="1.3*" />
                    <!--<DataGridTextColumn Header="挂具位置" Binding="{Binding HangerPosition}" Width="*" />-->
                    <DataGridTextColumn Header="颜色" Binding="{Binding Color}" Width="0.5*" />
                    <DataGridTextColumn Header="下挂翻转台" Binding="{Binding FlipTable}" Width="*" />
                    <DataGridTextColumn Header="上挂时间" Binding="{Binding HangTime}" Width="1.3*" />
                    <DataGridTextColumn Header="下挂时间" Binding="{Binding DropTime}" Width="1.3*" />
                </DataGrid.Columns>
            </DataGrid>

            <!-- 分页控制条 -->
            <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                <TextBlock Text="{Binding AllProducts.Count, StringFormat=Total {0}}" Foreground="White" Margin="0,5,20,0"/>

                <ComboBox Width="80" SelectedValue="{Binding PageSize}" SelectedValuePath="Content">
                    <ComboBoxItem Content="13" />
                    <ComboBoxItem Content="14" />
                    <ComboBoxItem Content="15" />
                    <ComboBoxItem Content="20" />
                    <ComboBoxItem Content="30" />
                    <ComboBoxItem Content="40" />
                    <ComboBoxItem Content="50" />
                </ComboBox>

                <Button Content="&lt;" Width="30" Command="{Binding PrevPageCommand}" />
                <Button Content="&gt;" Width="30" Margin="5,0" Command="{Binding NextPageCommand}" />

                <TextBlock Text="Page" Foreground="White" VerticalAlignment="Center" Margin="10,0"/>
                <TextBox Width="40" Text="{Binding CurrentPage, UpdateSourceTrigger=PropertyChanged}" HorizontalContentAlignment="Center"/>
                <TextBlock Text="{Binding TotalPages, StringFormat=/ {0}}" Foreground="White" VerticalAlignment="Center" Margin="5,0"/>
            </StackPanel>
        </Grid>

    </Grid>
</UserControl>
